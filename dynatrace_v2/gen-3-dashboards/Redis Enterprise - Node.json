{"version":19,"variables":[{"version":1,"key":"Cluster","type":"query","visible":true,"editable":true,"input":"timeseries any=avg(redis.db_config), by:{cluster}\n| fieldsKeep cluster\n| sort cluster\n","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"version":1,"key":"Node","type":"query","visible":true,"editable":true,"input":"timeseries any=avg(redis.node_metrics_up), by:{cluster, node}\n| filter in(cluster,$Cluster)\n| summarize count(), by:{node}\n| fieldsKeep node\n| sort node","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]}],"tiles":{"1":{"title":"","type":"data","query":"timeseries {\n  s = avg(redis.node_metrics_up), \n  value.A = avg(redis.node_metrics_up, scalar: true) }, \n  by: { cluster, node }, \n  filter: { matchesValue(cluster, { $Cluster }) \n  AND matchesValue(node, { $Node }) }\n| summarize takeLast(s), by: {cluster, node, status = arrayLast(s)}","visualization":"table","visualizationSettings":{"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"status","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"=","label":"","value":1},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"â‰¥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"<","label":"","value":1}]}],"table":{"columnTypeOverrides":[],"columnOrder":["[\"status\"]","[\"cluster\"]","[\"node\"]","[\"takeLast(s)\"]"],"hiddenColumns":[["timeframe","start"],["timeframe","end"],["interval"],["value.A"],["takeLast(s)"]]},"unitsOverrides":[{"identifier":"status","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1756344480520}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"3":{"title":"Shard Count","type":"data","query":"timeseries { count(redis.redis_server_up), num_shards = avg(redis.redis_server_up, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) }","visualization":"table","visualizationSettings":{"thresholds":[],"autoSelectVisualization":false,"table":{"columnTypeOverrides":[{"fields":["count(redis.redis_server_up)"],"value":"sparkline","id":1756344640543}],"columnOrder":["[\"timeframe\",\"start\"]","[\"timeframe\",\"end\"]","[\"interval\"]","[\"cluster\"]","[\"node\"]","[\"count(redis.redis_server_up)\"]","[\"num_shards\"]"],"hiddenColumns":[["timeframe","start"],["timeframe","end"],["interval"],["count(redis.redis_server_up)"]],"sortBy":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"4":{"title":"Node Available Memory","type":"data","subType":"dql-builder-metrics","query":"timeseries { avg(redis.node_available_memory_bytes), value.A = avg(redis.node_available_memory_bytes, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) }","visualization":"lineChart","visualizationSettings":{"thresholds":[],"autoSelectVisualization":true,"table":{"columnTypeOverrides":[{"fields":["avg(redis.node_available_memory_bytes)"],"value":"sparkline","id":1756344855869}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"redis.node_available_memory_bytes","aggregation":"avg"},"by":["cluster","node"],"filter":"cluster=$Cluster node=$Node"}]},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"5":{"title":"Memory Usage","type":"data","subType":"dql-builder-metrics","query":"timeseries { sum(redis.redis_server_used_memory), value.A = avg(redis.redis_server_used_memory, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) }","visualization":"lineChart","visualizationSettings":{"thresholds":[],"autoSelectVisualization":true,"table":{"columnTypeOverrides":[{"fields":["sum(redis.redis_server_used_memory)"],"value":"sparkline","id":1756344980762}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"redis.redis_server_used_memory","aggregation":"sum"},"by":["cluster","node"],"filter":"cluster=$Cluster node=$Node"}]},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"6":{"title":"CPU Utilization","type":"data","subType":"dql-builder-metrics","query":"timeseries { sum(redis.namedprocess_namegroup_cpu_seconds_total, rate: 1s), value.A = avg(redis.namedprocess_namegroup_cpu_seconds_total, rate: 1s, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) AND matchesValue(mode, { \"system\", \"user\" }) }","visualization":"lineChart","visualizationSettings":{"thresholds":[],"autoSelectVisualization":true,"table":{"columnTypeOverrides":[{"fields":["sum(redis.namedprocess_namegroup_cpu_seconds_total, rate:1s)"],"value":"sparkline","id":1756382471484}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"redis.namedprocess_namegroup_cpu_seconds_total","aggregation":"sum"},"by":["cluster","node"],"rate":"1s","filter":"cluster=$Cluster node=$Node mode in (system, user)  "}],"globalCommands":{}},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"8":{"type":"data","title":"Egress","query":"timeseries { sum(redis.endpoint_egress, rate: 1s), value.A = avg(redis.endpoint_egress, rate: 1s, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) }","queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"redis.endpoint_egress","aggregation":"sum"},"by":["cluster","node"],"rate":"1s","filter":"cluster=$Cluster node=$Node"}]},"subType":"dql-builder-metrics","visualization":"lineChart","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"autoSelectVisualization":true,"table":{"columnTypeOverrides":[]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"9":{"type":"data","title":"Ingress","query":"timeseries { sum(redis.endpoint_ingress, rate: 1s), value.A = avg(redis.endpoint_ingress, rate: 1s, scalar: true) }, by: { cluster, node }, filter: { matchesValue(cluster, $Cluster) AND matchesValue(node, $Node) }","queryConfig":{"version":"15.4.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"redis.endpoint_ingress","aggregation":"sum"},"by":["cluster","node"],"rate":"1s","filter":"cluster=$Cluster node=$Node"}]},"subType":"dql-builder-metrics","visualization":"lineChart","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"autoSelectVisualization":true,"table":{"columnTypeOverrides":[{"fields":["sum(redis.endpoint_ingress, rate:1s)"],"value":"sparkline","id":1756383837364}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},"layouts":{"1":{"x":0,"y":0,"w":8,"h":6},"3":{"x":8,"y":0,"w":8,"h":6},"4":{"x":16,"y":0,"w":8,"h":6},"5":{"x":0,"y":6,"w":8,"h":6},"6":{"x":8,"y":6,"w":8,"h":6},"8":{"x":16,"y":6,"w":8,"h":6},"9":{"x":0,"y":12,"w":8,"h":6}},"importedWithCode":false,"settings":{}}